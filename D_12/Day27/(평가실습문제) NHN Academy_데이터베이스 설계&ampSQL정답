-- 이거 왜 안되는건데??????
-- ﻿CREATE TABLE Person_Relation (
-- 	`Relation_ID`	int	primary key,
-- 	`Relation_Name`	varchar(4)	NOT NULL
-- );
CREATE TABLE `Person_Relation` (
    `Relation_ID` INT primary key,
    `Relation_Name` VARCHAR(10) NOT NULL
);
-- alter table Person_Relation modify Relation_Name varchar(10);

CREATE TABLE `Address` (
	`Address_ID`	int	primary key,
	`ZipCode`	int	NOT NULL,
	`Providon`	varchar(7)	NOT NULL,
	`City`	varchar(5)	NOT NULL,
	`Addr1`	longtext	NOT NULL,
	`Addr2`	longtext	NULL
);

CREATE TABLE `AddressBook` (
	`AddressBook_ID`	int	primary key,
	`Move_In_Date`	VARCHAR(255)	NULL,
	Address_ID int not null,
    foreign key (Address_ID) references Address(Address_ID)
);

CREATE TABLE `Person` (
	`Person_ID`	int	primary key,
	`Regident_Num`	varchar(300)	NOT NULL,
	`Name`	varchar(16)	NOT NULL,
	`Gender`	tinyint	NOT NULL,
	`State`	tinyint	NOT NULL,
    `AddressBook_ID` int not null,
    foreign key (`AddressBook_ID`) REFERENCES `AddressBook` (`AddressBook_ID`)
);

CREATE TABLE `Family_Relation` (
	`Person_ID`	int	primary key,
	`Family_ID`	int	NOT NULL,
	`Relation_ID`	int	NOT NULL,
    foreign key (Person_ID) references Person(Person_ID),
    foreign key (Relation_ID) references Person_Relation(Relation_ID)
);

CREATE TABLE `ReporterType` (
	`ReporterType_ID`	int primary key,
	`Reporter_Type`	varchar(20)	NOT NULL
);

CREATE TABLE `Reporter` (
	`Reporter_ID`int auto_increment primary key,
	`Phone_Num`	int	NOT NULL,
	`Email`	varchar(50)	NULL,
    Person_ID int not null,
    ReporterType_ID int not null,
    foreign key (Person_ID) references Person(Person_ID),
    foreign key (ReporterType_ID) references ReporterType(ReporterType_ID)
);

CREATE TABLE `Born` (
	`Born_ID`	int primary key,
	`Birth_Date`	Datetime	NOT NULL,
	`Report_Date`	Date	NOT NULL,
	`Address`	VARCHAR(255) NOT NULL,
	Person_ID	int not	NULL,
    BornLocation_ID	int not	NULL,
    foreign key (Person_ID) references Person(Person_ID),
    foreign key (BornLocation_ID) references BornLocation_Type(BornLocation_ID)
);

CREATE TABLE `Birth_Qualification` (
	`Relation_ID`	int	primary key,
	`Relation_Name`	varchar(15)	NOT NULL,
	`ReporterType_ID`	int	NOT NULL,
    foreign key (ReporterType_ID) references ReporterType(ReporterType_ID)
);

CREATE TABLE `Death_Qualification` (
	`Relation_ID`	int	primary key,
	`Relation_Name`	varchar(15)	NOT NULL,
	`ReporterType_ID`	int	NOT NULL,
    foreign key (ReporterType_ID) references ReporterType(ReporterType_ID)
);

CREATE TABLE `Certificate` (
	`Certificate_Num`	int	primary key,
	`Report_Day`	Date	NOT NULL,
	`ReporterName`	varchar(50)	NOT NULL,
    Certification_ID	int	NOT NULL,
    foreign key (Certification_ID) references Certification_Type(Certification_ID)
);

CREATE TABLE `Dead` (
	`Dead_ID`	int	primary key,
	`Dead_Date`	Datetime	NOT NULL,
	`Report_Date`	Date	NOT NULL,
	`Address`	longtext	NOT NULL,
    Person_ID	int	NOT NULL,
    DeadLocation_ID	int	NOT NULL,
    foreign key (Person_ID) references Person(Person_ID),
    foreign key (DeadLocation_ID) references DeadLocationType(DeadLocation_ID)
);

CREATE TABLE `BornLocation_Type` (
	`BornLocation_ID` int primary key,
	`BornLocation_Name`	varchar(50) not null
);

CREATE TABLE `DeadLocationType` (
	`DeadLocation_ID`	int	primary key,
	`DeadLocation_Name`	varchar(50)	NOT NULL
);

CREATE TABLE `Certification_Type` (
	`Certification_ID`	int	primary key,
	`Certification_Type`	varchar(20)	NOT NULL
);

CREATE TABLE `Householder` (
	`HouseHolder_ID`	int	primary key,
	`HouseHolder_Name`	varchar(50)	NOT NULL,
	`Reason`	varchar(255)	NOT NULL,
    `Person_ID` int not null,
    `Relation_ID` int not null,
    foreign key (`Person_ID`) references `Person`(`Person_ID`),
    foreign key (`Relation_ID`) references `Person_Relation`(`Relation_ID`)
);

insert into ReporterType values (1, '출생');
insert into ReporterType values (2, '사망');

insert into Person_Relation values (1, '본인');
insert into Person_Relation values (2, '부');
insert into Person_Relation values (3, '모');
insert into Person_Relation values (4, '배우자');
insert into Person_Relation values (5, '자녀');
insert into Person_Relation values (6, '동거인');
-- delete from Person_Relation where Relation_ID >= 1;

SELECT * FROM project3_person.Person_Relation;

insert into Certification_Type values (1,'가족관계증명서');
insert into Certification_Type values (2,'주민등록등본');

insert into BornLocation_Type values(1,'자택');
insert into BornLocation_Type values(2,'병원');
insert into BornLocation_Type values(3,'기타');

insert into DeadLocationType values(1, '주택');
insert into DeadLocationType values(2, '의료기관');
insert into DeadLocationType values(3, '사회복지시설(양로원, 고아원 등)');
insert into DeadLocationType values(4, '산업장');
insert into DeadLocationType values(5, '공공시설(학교, 운동장 등)');
insert into DeadLocationType values(6, '도로');
insert into DeadLocationType values(7, '상업/서비스시설(상점, 호텔 등)');
insert into DeadLocationType values(8, '농장(논밭, 축사, 양식장 등)');
insert into DeadLocationType values(9, '병원 이송 중 사망');
insert into DeadLocationType values(10, '기타');

insert into Birth_Qualification values (1,'부',1);
insert into Birth_Qualification values (2,'모',1);
insert into Birth_Qualification values (3,'호주',1);
insert into Birth_Qualification values (4,'동거친족',1);
insert into Birth_Qualification values (5,'기타',1);

insert into Death_Qualification values(1,'부',2);
insert into Death_Qualification values(2,'모',2);
insert into Death_Qualification values(3,'동거자',2);
insert into Death_Qualification values(4,'기타',2);

select * from Birth_Qualification as b, Death_Qualification as d;
select re.ReporterType_ID, re.Reporter_Type, b.Relation_ID, b.Relation_Name from Birth_Qualification as b natural join ReporterType as re;
select re.ReporterType_ID, re.Reporter_Type, d.Relation_ID, d.Relation_Name from Death_Qualification as d natural join ReporterType as re;
select * from Death_Qualification;
select * from ReporterType;
